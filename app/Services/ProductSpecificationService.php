<?php

namespace App\Services;

use App\Models\ProductSpecification;
use App\Models\Category;
use Illuminate\Support\Facades\DB;
use Illuminate\Support\Facades\Log;
use Illuminate\Database\Eloquent\Collection;

class ProductSpecificationService
{
    /**
     * Save product specifications
     *
     * @param int $productId
     * @param array $specifications
     * @return void
     */
    public function saveProductSpecifications(int $productId, array $specifications): void
    {
        // Delete existing specifications for this product
        ProductSpecification::where('product_id', $productId)->delete();

        // Insert new specifications
        foreach ($specifications as $spec) {
            if (!empty($spec['specification_key']) && !empty($spec['specification_value'])) {
                ProductSpecification::create([
                    'product_id' => $productId,
                    'specification_key' => $spec['specification_key'],
                    'specification_value' => $spec['specification_value'],
                    'unit' => $spec['unit'] ?? null,
                    'category' => $spec['category'] ?? 'General',
                    'display_name' => $spec['display_name'] ?? $spec['specification_key'],
                    'description' => $spec['description'] ?? null,
                    'sort_order' => $spec['sort_order'] ?? 0,
                    'is_filterable' => $spec['is_filterable'] ?? false,
                    'is_searchable' => $spec['is_searchable'] ?? false,
                    'show_on_listing' => $spec['show_on_listing'] ?? false,
                    'show_on_detail' => $spec['show_on_detail'] ?? true,
                ]);
            }
        }
    }

    /**
     * Get existing specifications for a product
     *
     * @param int $productId
     * @return \Illuminate\Database\Eloquent\Collection
     */
    public function getExistingSpecifications(int $productId)
    {
        return ProductSpecification::where('product_id', $productId)
            ->orderBy('category', 'asc')
            ->orderBy('sort_order', 'asc')
            ->get();
    }

    /**
     * Get category specification templates
     *
     * @param int $categoryId
     * @return array
     */
    public function getCategorySpecificationTemplates(int $categoryId): array
    {
        $category = Category::find($categoryId);
        
        if (!$category) {
            \Log::info("Category not found for ID: {$categoryId}");
            return [];
        }

        \Log::info("Looking for templates for category: {$category->name}");

        // Define templates based on category name - format for JavaScript frontend
        $templates = [
            // Rapid Test Kit Templates
            'Women\'s Health' => [
                'Performance' => [
                    [
                        'key' => 'tests_per_kit',
                        'name' => 'Tests per Kit',
                        'type' => 'number',
                        'unit' => 'tests',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'detection_time',
                        'name' => 'Detection Time',
                        'type' => 'number',
                        'unit' => 'minutes',
                        'category' => 'Performance',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'sensitivity',
                        'name' => 'Sensitivity',
                        'type' => 'text',
                        'unit' => '%',
                        'category' => 'Performance',
                        'sort_order' => 3,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'specificity',
                        'name' => 'Specificity',
                        'type' => 'text',
                        'unit' => '%',
                        'category' => 'Performance',
                        'sort_order' => 4,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Sample Requirements' => [
                    [
                        'key' => 'sample_type',
                        'name' => 'Sample Type',
                        'type' => 'select',
                        'options' => ['Serum', 'Plasma', 'Whole Blood', 'Urine', 'Saliva'],
                        'category' => 'Sample Requirements',
                        'sort_order' => 5,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'sample_volume',
                        'name' => 'Sample Volume',
                        'type' => 'text',
                        'unit' => 'Î¼L',
                        'category' => 'Sample Requirements',
                        'sort_order' => 6,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Storage & Handling' => [
                    [
                        'key' => 'storage_temperature',
                        'name' => 'Storage Temperature',
                        'type' => 'text',
                        'unit' => 'Â°C',
                        'category' => 'Storage & Handling',
                        'sort_order' => 7,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'shelf_life',
                        'name' => 'Shelf Life',
                        'type' => 'text',
                        'unit' => 'months',
                        'category' => 'Storage & Handling',
                        'sort_order' => 8,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Regulatory' => [
                    [
                        'key' => 'ce_marking',
                        'name' => 'CE Marking',
                        'type' => 'select',
                        'options' => ['Yes', 'No', 'In Progress'],
                        'category' => 'Regulatory',
                        'sort_order' => 9,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'fda_status',
                        'name' => 'FDA Status',
                        'type' => 'select',
                        'options' => ['Approved', 'Pending', 'Not Required'],
                        'category' => 'Regulatory',
                        'sort_order' => 10,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Infectious Disease' => [
                'Performance' => [
                    [
                        'key' => 'tests_per_kit',
                        'name' => 'Tests per Kit',
                        'type' => 'number',
                        'unit' => 'tests',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'detection_time',
                        'name' => 'Detection Time',
                        'type' => 'number',
                        'unit' => 'minutes',
                        'category' => 'Performance',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'sensitivity',
                        'name' => 'Sensitivity',
                        'type' => 'text',
                        'unit' => '%',
                        'category' => 'Performance',
                        'sort_order' => 3,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'specificity',
                        'name' => 'Specificity',
                        'type' => 'text',
                        'unit' => '%',
                        'category' => 'Performance',
                        'sort_order' => 4,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'target_pathogen',
                        'name' => 'Target Pathogen',
                        'type' => 'text',
                        'category' => 'Performance',
                        'sort_order' => 5,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Sample Requirements' => [
                    [
                        'key' => 'sample_type',
                        'name' => 'Sample Type',
                        'type' => 'select',
                        'options' => ['Serum', 'Plasma', 'Whole Blood', 'Nasal Swab', 'Throat Swab', 'Saliva'],
                        'category' => 'Sample Requirements',
                        'sort_order' => 6,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'sample_volume',
                        'name' => 'Sample Volume',
                        'type' => 'text',
                        'unit' => 'Î¼L',
                        'category' => 'Sample Requirements',
                        'sort_order' => 7,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Storage & Handling' => [
                    [
                        'key' => 'storage_temperature',
                        'name' => 'Storage Temperature',
                        'type' => 'text',
                        'unit' => 'Â°C',
                        'category' => 'Storage & Handling',
                        'sort_order' => 8,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'shelf_life',
                        'name' => 'Shelf Life',
                        'type' => 'text',
                        'unit' => 'months',
                        'category' => 'Storage & Handling',
                        'sort_order' => 9,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Regulatory' => [
                    [
                        'key' => 'ce_marking',
                        'name' => 'CE Marking',
                        'type' => 'select',
                        'options' => ['Yes', 'No', 'In Progress'],
                        'category' => 'Regulatory',
                        'sort_order' => 10,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'fda_status',
                        'name' => 'FDA Status',
                        'type' => 'select',
                        'options' => ['Approved', 'Pending', 'Not Required'],
                        'category' => 'Regulatory',
                        'sort_order' => 11,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Drugs of Abuse' => [
                'Performance' => [
                    [
                        'key' => 'tests_per_kit',
                        'name' => 'Tests per Kit',
                        'type' => 'number',
                        'unit' => 'tests',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'detection_time',
                        'name' => 'Detection Time',
                        'type' => 'number',
                        'unit' => 'minutes',
                        'category' => 'Performance',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'sensitivity',
                        'name' => 'Sensitivity',
                        'type' => 'text',
                        'unit' => '%',
                        'category' => 'Performance',
                        'sort_order' => 3,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'cut_off_level',
                        'name' => 'Cut-off Level',
                        'type' => 'text',
                        'unit' => 'ng/mL',
                        'category' => 'Performance',
                        'sort_order' => 4,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'target_substances',
                        'name' => 'Target Substances',
                        'type' => 'textarea',
                        'category' => 'Performance',
                        'sort_order' => 5,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Sample Requirements' => [
                    [
                        'key' => 'sample_type',
                        'name' => 'Sample Type',
                        'type' => 'select',
                        'options' => ['Urine', 'Saliva', 'Serum', 'Plasma'],
                        'category' => 'Sample Requirements',
                        'sort_order' => 6,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'sample_volume',
                        'name' => 'Sample Volume',
                        'type' => 'text',
                        'unit' => 'mL',
                        'category' => 'Sample Requirements',
                        'sort_order' => 7,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Storage & Handling' => [
                    [
                        'key' => 'storage_temperature',
                        'name' => 'Storage Temperature',
                        'type' => 'text',
                        'unit' => 'Â°C',
                        'category' => 'Storage & Handling',
                        'sort_order' => 8,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'shelf_life',
                        'name' => 'Shelf Life',
                        'type' => 'text',
                        'unit' => 'months',
                        'category' => 'Storage & Handling',
                        'sort_order' => 9,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Regulatory' => [
                    [
                        'key' => 'ce_marking',
                        'name' => 'CE Marking',
                        'type' => 'select',
                        'options' => ['Yes', 'No', 'In Progress'],
                        'category' => 'Regulatory',
                        'sort_order' => 10,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Tumor Markers' => [
                'Performance' => [
                    [
                        'key' => 'tests_per_kit',
                        'name' => 'Tests per Kit',
                        'type' => 'number',
                        'unit' => 'tests',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'detection_time',
                        'name' => 'Detection Time',
                        'type' => 'number',
                        'unit' => 'minutes',
                        'category' => 'Performance',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'sensitivity',
                        'name' => 'Sensitivity',
                        'type' => 'text',
                        'unit' => '%',
                        'category' => 'Performance',
                        'sort_order' => 3,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'specificity',
                        'name' => 'Specificity',
                        'type' => 'text',
                        'unit' => '%',
                        'category' => 'Performance',
                        'sort_order' => 4,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'target_markers',
                        'name' => 'Target Markers',
                        'type' => 'textarea',
                        'category' => 'Performance',
                        'sort_order' => 5,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Sample Requirements' => [
                    [
                        'key' => 'sample_type',
                        'name' => 'Sample Type',
                        'type' => 'select',
                        'options' => ['Serum', 'Plasma', 'Whole Blood'],
                        'category' => 'Sample Requirements',
                        'sort_order' => 6,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'sample_volume',
                        'name' => 'Sample Volume',
                        'type' => 'text',
                        'unit' => 'Î¼L',
                        'category' => 'Sample Requirements',
                        'sort_order' => 7,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Storage & Handling' => [
                    [
                        'key' => 'storage_temperature',
                        'name' => 'Storage Temperature',
                        'type' => 'text',
                        'unit' => 'Â°C',
                        'category' => 'Storage & Handling',
                        'sort_order' => 8,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'shelf_life',
                        'name' => 'Shelf Life',
                        'type' => 'text',
                        'unit' => 'months',
                        'category' => 'Storage & Handling',
                        'sort_order' => 9,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Regulatory' => [
                    [
                        'key' => 'ce_marking',
                        'name' => 'CE Marking',
                        'type' => 'select',
                        'options' => ['Yes', 'No', 'In Progress'],
                        'category' => 'Regulatory',
                        'sort_order' => 10,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'fda_status',
                        'name' => 'FDA Status',
                        'type' => 'select',
                        'options' => ['Approved', 'Pending', 'Not Required'],
                        'category' => 'Regulatory',
                        'sort_order' => 11,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Cardiac Markers' => [
                'Performance' => [
                    [
                        'key' => 'tests_per_kit',
                        'name' => 'Tests per Kit',
                        'type' => 'number',
                        'unit' => 'tests',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'detection_time',
                        'name' => 'Detection Time',
                        'type' => 'number',
                        'unit' => 'minutes',
                        'category' => 'Performance',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'sensitivity',
                        'name' => 'Sensitivity',
                        'type' => 'text',
                        'unit' => '%',
                        'category' => 'Performance',
                        'sort_order' => 3,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'specificity',
                        'name' => 'Specificity',
                        'type' => 'text',
                        'unit' => '%',
                        'category' => 'Performance',
                        'sort_order' => 4,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'cardiac_markers',
                        'name' => 'Cardiac Markers',
                        'type' => 'textarea',
                        'category' => 'Performance',
                        'sort_order' => 5,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Sample Requirements' => [
                    [
                        'key' => 'sample_type',
                        'name' => 'Sample Type',
                        'type' => 'select',
                        'options' => ['Serum', 'Plasma', 'Whole Blood'],
                        'category' => 'Sample Requirements',
                        'sort_order' => 6,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'sample_volume',
                        'name' => 'Sample Volume',
                        'type' => 'text',
                        'unit' => 'Î¼L',
                        'category' => 'Sample Requirements',
                        'sort_order' => 7,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Storage & Handling' => [
                    [
                        'key' => 'storage_temperature',
                        'name' => 'Storage Temperature',
                        'type' => 'text',
                        'unit' => 'Â°C',
                        'category' => 'Storage & Handling',
                        'sort_order' => 8,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'shelf_life',
                        'name' => 'Shelf Life',
                        'type' => 'text',
                        'unit' => 'months',
                        'category' => 'Storage & Handling',
                        'sort_order' => 9,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Regulatory' => [
                    [
                        'key' => 'ce_marking',
                        'name' => 'CE Marking',
                        'type' => 'select',
                        'options' => ['Yes', 'No', 'In Progress'],
                        'category' => 'Regulatory',
                        'sort_order' => 10,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'fda_status',
                        'name' => 'FDA Status',
                        'type' => 'select',
                        'options' => ['Approved', 'Pending', 'Not Required'],
                        'category' => 'Regulatory',
                        'sort_order' => 11,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Other Rapid Tests' => [
                'Performance' => [
                    [
                        'key' => 'tests_per_kit',
                        'name' => 'Tests per Kit',
                        'type' => 'number',
                        'unit' => 'tests',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'detection_time',
                        'name' => 'Detection Time',
                        'type' => 'number',
                        'unit' => 'minutes',
                        'category' => 'Performance',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'sensitivity',
                        'name' => 'Sensitivity',
                        'type' => 'text',
                        'unit' => '%',
                        'category' => 'Performance',
                        'sort_order' => 3,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'specificity',
                        'name' => 'Specificity',
                        'type' => 'text',
                        'unit' => '%',
                        'category' => 'Performance',
                        'sort_order' => 4,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'test_principle',
                        'name' => 'Test Principle',
                        'type' => 'text',
                        'category' => 'Performance',
                        'sort_order' => 5,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Sample Requirements' => [
                    [
                        'key' => 'sample_type',
                        'name' => 'Sample Type',
                        'type' => 'select',
                        'options' => ['Serum', 'Plasma', 'Whole Blood', 'Urine', 'Saliva', 'Swab'],
                        'category' => 'Sample Requirements',
                        'sort_order' => 6,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'sample_volume',
                        'name' => 'Sample Volume',
                        'type' => 'text',
                        'unit' => 'Î¼L',
                        'category' => 'Sample Requirements',
                        'sort_order' => 7,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Storage & Handling' => [
                    [
                        'key' => 'storage_temperature',
                        'name' => 'Storage Temperature',
                        'type' => 'text',
                        'unit' => 'Â°C',
                        'category' => 'Storage & Handling',
                        'sort_order' => 8,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'shelf_life',
                        'name' => 'Shelf Life',
                        'type' => 'text',
                        'unit' => 'months',
                        'category' => 'Storage & Handling',
                        'sort_order' => 9,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Regulatory' => [
                    [
                        'key' => 'ce_marking',
                        'name' => 'CE Marking',
                        'type' => 'select',
                        'options' => ['Yes', 'No', 'In Progress'],
                        'category' => 'Regulatory',
                        'sort_order' => 10,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'fda_status',
                        'name' => 'FDA Status',
                        'type' => 'select',
                        'options' => ['Approved', 'Pending', 'Not Required'],
                        'category' => 'Regulatory',
                        'sort_order' => 11,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Lab Equipment' => [
                'Physical' => [
                    [
                        'key' => 'dimensions',
                        'name' => 'Dimensions',
                        'type' => 'text',
                        'unit' => 'cm',
                        'category' => 'Physical',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'weight',
                        'name' => 'Weight',
                        'type' => 'decimal',
                        'unit' => 'kg',
                        'category' => 'Physical',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Electrical' => [
                    [
                        'key' => 'power_consumption',
                        'name' => 'Power Consumption',
                        'type' => 'decimal',
                        'unit' => 'W',
                        'category' => 'Electrical',
                        'sort_order' => 3,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'voltage',
                        'name' => 'Voltage',
                        'type' => 'decimal',
                        'unit' => 'V',
                        'category' => 'Electrical',
                        'sort_order' => 4,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Construction' => [
                    [
                        'key' => 'material',
                        'name' => 'Material',
                        'type' => 'text',
                        'category' => 'Construction',
                        'sort_order' => 5,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Mixing & Shaking Equipment' => [
                'Performance' => [
                    [
                        'key' => 'max_speed',
                        'name' => 'Max Speed',
                        'type' => 'decimal',
                        'unit' => 'rpm',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'capacity',
                        'name' => 'Capacity',
                        'type' => 'text',
                        'unit' => '',
                        'category' => 'Performance',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Construction' => [
                    [
                        'key' => 'material',
                        'name' => 'Material',
                        'type' => 'text',
                        'category' => 'Construction',
                        'sort_order' => 3,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Grinding & Homogenization Instruments' => [
                'Performance' => [
                    [
                        'key' => 'capacity',
                        'name' => 'Capacity',
                        'type' => 'text',
                        'unit' => '',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'diameter_mm',
                        'name' => 'Ã (mm)',
                        'type' => 'decimal',
                        'unit' => 'mm',
                        'category' => 'Performance',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'hint_mm',
                        'name' => 'hint (mm)',
                        'type' => 'decimal',
                        'unit' => 'mm',
                        'category' => 'Performance',
                        'sort_order' => 3,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'htotal_mm',
                        'name' => 'htotal (mm)',
                        'type' => 'decimal',
                        'unit' => 'mm',
                        'category' => 'Performance',
                        'sort_order' => 4,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Construction' => [
                    [
                        'key' => 'material',
                        'name' => 'Material',
                        'type' => 'text',
                        'category' => 'Construction',
                        'sort_order' => 5,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Centrifuges' => [
                'Performance' => [
                    [
                        'key' => 'max_speed',
                        'name' => 'Max Speed',
                        'type' => 'decimal',
                        'unit' => 'rpm',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'max_rcf',
                        'name' => 'Max RCF',
                        'type' => 'decimal',
                        'unit' => 'g',
                        'category' => 'Performance',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Capacity' => [
                    [
                        'key' => 'capacity',
                        'name' => 'Capacity',
                        'type' => 'text',
                        'unit' => '',
                        'category' => 'Capacity',
                        'sort_order' => 3,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Mixers' => [
                'Performance' => [
                    [
                        'key' => 'max_speed',
                        'name' => 'Max Speed',
                        'type' => 'decimal',
                        'unit' => 'rpm',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Construction' => [
                    [
                        'key' => 'material',
                        'name' => 'Material',
                        'type' => 'text',
                        'category' => 'Construction',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Shakers' => [
                'Performance' => [
                    [
                        'key' => 'max_speed',
                        'name' => 'Max Speed',
                        'type' => 'decimal',
                        'unit' => 'rpm',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Construction' => [
                    [
                        'key' => 'material',
                        'name' => 'Material',
                        'type' => 'text',
                        'category' => 'Construction',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Microbiology Equipment' => [
                'Performance' => [
                    [
                        'key' => 'capacity',
                        'name' => 'Capacity',
                        'type' => 'text',
                        'unit' => '',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Construction' => [
                    [
                        'key' => 'material',
                        'name' => 'Material',
                        'type' => 'text',
                        'category' => 'Construction',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Pathology Equipment' => [
                'Performance' => [
                    [
                        'key' => 'capacity',
                        'name' => 'Capacity',
                        'type' => 'text',
                        'unit' => '',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Construction' => [
                    [
                        'key' => 'material',
                        'name' => 'Material',
                        'type' => 'text',
                        'category' => 'Construction',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Thermal & Process Equipment' => [
                'Performance' => [
                    [
                        'key' => 'temperature_range',
                        'name' => 'Temperature Range',
                        'type' => 'text',
                        'unit' => 'Â°C',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Construction' => [
                    [
                        'key' => 'material',
                        'name' => 'Material',
                        'type' => 'text',
                        'category' => 'Construction',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Distillation Systems' => [
                'Performance' => [
                    [
                        'key' => 'capacity',
                        'name' => 'Capacity',
                        'type' => 'text',
                        'unit' => 'L',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Incubators & Ovens' => [
                'Performance' => [
                    [
                        'key' => 'temperature_range',
                        'name' => 'Temperature Range',
                        'type' => 'text',
                        'unit' => 'Â°C',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Disinfection And Sterilization Equipment' => [
                'Performance' => [
                    [
                        'key' => 'sterilization_method',
                        'name' => 'Sterilization Method',
                        'type' => 'text',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Air Protection Equipment' => [
                'Performance' => [
                    [
                        'key' => 'airflow',
                        'name' => 'Airflow',
                        'type' => 'text',
                        'unit' => 'm3/h',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Cold Chain Products' => [
                'Performance' => [
                    [
                        'key' => 'temperature_range',
                        'name' => 'Temperature Range',
                        'type' => 'text',
                        'unit' => 'Â°C',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Lab Consumables' => [
                'Physical' => [
                    [
                        'key' => 'size',
                        'name' => 'Size',
                        'type' => 'text',
                        'category' => 'Physical',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Construction' => [
                    [
                        'key' => 'material',
                        'name' => 'Material',
                        'type' => 'text',
                        'category' => 'Construction',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Quality' => [
                    [
                        'key' => 'sterility',
                        'name' => 'Sterility',
                        'type' => 'select',
                        'options' => ['Sterile', 'Non-sterile', 'Single-use', 'Reusable'],
                        'category' => 'Quality',
                        'sort_order' => 3,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'General' => [
                    [
                        'key' => 'packaging',
                        'name' => 'Packaging',
                        'type' => 'text',
                        'category' => 'General',
                        'sort_order' => 4,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Lab Essentials (Tubes, Pipettes, Glassware)' => [
                'Physical' => [
                    [
                        'key' => 'size',
                        'name' => 'Size',
                        'type' => 'text',
                        'category' => 'Physical',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Material' => [
                    [
                        'key' => 'material',
                        'name' => 'Material',
                        'type' => 'text',
                        'category' => 'Material',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Quality' => [
                    [
                        'key' => 'sterility',
                        'name' => 'Sterility',
                        'type' => 'select',
                        'options' => ['Sterile', 'Non-sterile', 'Single-use', 'Reusable'],
                        'category' => 'Quality',
                        'sort_order' => 3,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Chemical & Reagents' => [
                'Chemical Properties' => [
                    [
                        'key' => 'purity',
                        'name' => 'Purity',
                        'type' => 'decimal',
                        'unit' => '%',
                        'category' => 'Chemical Properties',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'grade',
                        'name' => 'Grade',
                        'type' => 'text',
                        'category' => 'Chemical Properties',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Packaging' => [
                    [
                        'key' => 'packaging',
                        'name' => 'Packaging',
                        'type' => 'text',
                        'category' => 'Packaging',
                        'sort_order' => 3,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Medical Consumables' => [
                'Physical' => [
                    [
                        'key' => 'size',
                        'name' => 'Size',
                        'type' => 'text',
                        'category' => 'Physical',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Construction' => [
                    [
                        'key' => 'material',
                        'name' => 'Material',
                        'type' => 'text',
                        'category' => 'Construction',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Quality' => [
                    [
                        'key' => 'sterility',
                        'name' => 'Sterility',
                        'type' => 'select',
                        'options' => ['Sterile', 'Non-sterile', 'Single-use', 'Reusable'],
                        'category' => 'Quality',
                        'sort_order' => 3,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'General' => [
                    [
                        'key' => 'packaging',
                        'name' => 'Packaging',
                        'type' => 'text',
                        'category' => 'General',
                        'sort_order' => 4,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'PPE & Safety Gear' => [
                'Physical' => [
                    [
                        'key' => 'size',
                        'name' => 'Size',
                        'type' => 'text',
                        'category' => 'Physical',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Material' => [
                    [
                        'key' => 'material',
                        'name' => 'Material',
                        'type' => 'text',
                        'category' => 'Material',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Quality' => [
                    [
                        'key' => 'sterility',
                        'name' => 'Sterility',
                        'type' => 'select',
                        'options' => ['Sterile', 'Non-sterile', 'Single-use', 'Reusable'],
                        'category' => 'Quality',
                        'sort_order' => 3,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Dental Consumables' => [
                'Physical' => [
                    [
                        'key' => 'size',
                        'name' => 'Size',
                        'type' => 'text',
                        'category' => 'Physical',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Material' => [
                    [
                        'key' => 'material',
                        'name' => 'Material',
                        'type' => 'text',
                        'category' => 'Material',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Quality' => [
                    [
                        'key' => 'sterility',
                        'name' => 'Sterility',
                        'type' => 'select',
                        'options' => ['Sterile', 'Non-sterile', 'Single-use', 'Reusable'],
                        'category' => 'Quality',
                        'sort_order' => 3,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Analytical Instruments' => [
                'Performance' => [
                    [
                        'key' => 'accuracy',
                        'name' => 'Accuracy',
                        'type' => 'decimal',
                        'unit' => '%',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'precision',
                        'name' => 'Precision',
                        'type' => 'decimal',
                        'unit' => '%',
                        'category' => 'Performance',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'detection_limit',
                        'name' => 'Detection Limit',
                        'type' => 'decimal',
                        'unit' => 'ppm',
                        'category' => 'Performance',
                        'sort_order' => 3,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'calibration_range',
                        'name' => 'Calibration Range',
                        'type' => 'text',
                        'category' => 'Performance',
                        'sort_order' => 4,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Chromatography Consumables' => [
                'Physical' => [
                    [
                        'key' => 'size',
                        'name' => 'Size',
                        'type' => 'text',
                        'category' => 'Physical',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Material' => [
                    [
                        'key' => 'material',
                        'name' => 'Material',
                        'type' => 'text',
                        'category' => 'Material',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'UV-Vis Spectrophotometers' => [
                'Performance' => [
                    [
                        'key' => 'wavelength_range',
                        'name' => 'Wavelength Range',
                        'type' => 'text',
                        'unit' => 'nm',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'bandwidth',
                        'name' => 'Bandwidth',
                        'type' => 'decimal',
                        'unit' => 'nm',
                        'category' => 'Performance',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Electrochemistry Equipment' => [
                'Performance' => [
                    [
                        'key' => 'measurement_range',
                        'name' => 'Measurement Range',
                        'type' => 'text',
                        'unit' => '',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Ion Chromatography(IC)' => [
                'Performance' => [
                    [
                        'key' => 'detection_limit',
                        'name' => 'Detection Limit',
                        'type' => 'decimal',
                        'unit' => 'ppm',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Liquid Chromatograph (HPLC)' => [
                'Column Specifications' => [
                    [
                        'key' => 'particle_size',
                        'name' => 'Particle Size',
                        'type' => 'decimal',
                        'unit' => 'Âµm',
                        'category' => 'Column Specifications',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'inner_diameter',
                        'name' => 'Inner Diameter',
                        'type' => 'decimal',
                        'unit' => 'mm',
                        'category' => 'Column Specifications',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'length',
                        'name' => 'Length',
                        'type' => 'decimal',
                        'unit' => 'mm',
                        'category' => 'Column Specifications',
                        'sort_order' => 3,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'chemistry',
                        'name' => 'Chemistry',
                        'type' => 'text',
                        'category' => 'Column Specifications',
                        'sort_order' => 4,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Performance' => [
                    [
                        'key' => 'pressure_limit',
                        'name' => 'Pressure Limit',
                        'type' => 'decimal',
                        'unit' => 'bar',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'ph_range',
                        'name' => 'pH Range',
                        'type' => 'text',
                        'category' => 'Performance',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'flow_rate',
                        'name' => 'Flow Rate',
                        'type' => 'decimal',
                        'unit' => 'mL/min',
                        'category' => 'Performance',
                        'sort_order' => 3,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Life Science & Research' => [
                'Product Specifications' => [
                    [
                        'key' => 'concentration',
                        'name' => 'Concentration',
                        'type' => 'decimal',
                        'unit' => 'mg/mL',
                        'category' => 'Product Specifications',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'purity',
                        'name' => 'Purity',
                        'type' => 'decimal',
                        'unit' => '%',
                        'category' => 'Product Specifications',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'storage_conditions',
                        'name' => 'Storage Conditions',
                        'type' => 'text',
                        'category' => 'Product Specifications',
                        'sort_order' => 3,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'expiry_date',
                        'name' => 'Expiry Date',
                        'type' => 'text',
                        'category' => 'Product Specifications',
                        'sort_order' => 4,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Antibodies' => [
                'Product Specifications' => [
                    [
                        'key' => 'concentration',
                        'name' => 'Concentration',
                        'type' => 'decimal',
                        'unit' => 'mg/mL',
                        'category' => 'Product Specifications',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'purity',
                        'name' => 'Purity',
                        'type' => 'decimal',
                        'unit' => '%',
                        'category' => 'Product Specifications',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Recombinant Proteins' => [
                'Product Specifications' => [
                    [
                        'key' => 'concentration',
                        'name' => 'Concentration',
                        'type' => 'decimal',
                        'unit' => 'mg/mL',
                        'category' => 'Product Specifications',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Recombinant Monoclonal Antibodies (recmAbTM)' => [
                'Product Specifications' => [
                    [
                        'key' => 'concentration',
                        'name' => 'Concentration',
                        'type' => 'decimal',
                        'unit' => 'mg/mL',
                        'category' => 'Product Specifications',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Cell Lines' => [
                'Product Specifications' => [
                    [
                        'key' => 'species',
                        'name' => 'Species',
                        'type' => 'text',
                        'category' => 'Product Specifications',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Ligands and Inhibitors' => [
                'Product Specifications' => [
                    [
                        'key' => 'concentration',
                        'name' => 'Concentration',
                        'type' => 'decimal',
                        'unit' => 'mg/mL',
                        'category' => 'Product Specifications',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Immune-Check Point' => [
                'Product Specifications' => [
                    [
                        'key' => 'concentration',
                        'name' => 'Concentration',
                        'type' => 'decimal',
                        'unit' => 'mg/mL',
                        'category' => 'Product Specifications',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Research Kits and Reagents' => [
                'Product Specifications' => [
                    [
                        'key' => 'kit_type',
                        'name' => 'Kit Type',
                        'type' => 'text',
                        'category' => 'Product Specifications',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'sdMAB â¢ (Single Domain Monoclonal Antibody)' => [
                'Product Specifications' => [
                    [
                        'key' => 'concentration',
                        'name' => 'Concentration',
                        'type' => 'decimal',
                        'unit' => 'mg/mL',
                        'category' => 'Product Specifications',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Veterinary' => [
                'General' => [
                    [
                        'key' => 'application',
                        'name' => 'Application',
                        'type' => 'text',
                        'category' => 'General',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Veterinary Diagnostics' => [
                'General' => [
                    [
                        'key' => 'test_type',
                        'name' => 'Test Type',
                        'type' => 'text',
                        'category' => 'General',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Technology & AI Solutions' => [
                'General' => [
                    [
                        'key' => 'solution_type',
                        'name' => 'Solution Type',
                        'type' => 'text',
                        'category' => 'General',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Women\'s Health' => [
                'Performance' => [
                    [
                        'key' => 'tests_per_kit',
                        'name' => 'Tests per Kit',
                        'type' => 'number',
                        'unit' => 'tests',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => true,
                    ],
                    [
                        'key' => 'detection_time',
                        'name' => 'Detection Time',
                        'type' => 'number',
                        'unit' => 'minutes',
                        'category' => 'Performance',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => true,
                    ],
                    [
                        'key' => 'sensitivity',
                        'name' => 'Sensitivity',
                        'type' => 'decimal',
                        'unit' => '%',
                        'category' => 'Performance',
                        'sort_order' => 3,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => true,
                    ],
                    [
                        'key' => 'specificity',
                        'name' => 'Specificity',
                        'type' => 'decimal',
                        'unit' => '%',
                        'category' => 'Performance',
                        'sort_order' => 4,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => true,
                    ],
                ],
                'Physical' => [
                    [
                        'key' => 'sample_type',
                        'name' => 'Sample Type',
                        'type' => 'select',
                        'options' => ['Nasal Swab', 'Throat Swab', 'Saliva', 'Blood', 'Urine'],
                        'category' => 'Physical',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => true,
                    ],
                    [
                        'key' => 'storage_temperature',
                        'name' => 'Storage Temperature',
                        'type' => 'text',
                        'unit' => 'Â°C',
                        'category' => 'Physical',
                        'sort_order' => 2,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => true,
                    ],
                    [
                        'key' => 'shelf_life',
                        'name' => 'Shelf Life',
                        'type' => 'number',
                        'unit' => 'months',
                        'category' => 'Physical',
                        'sort_order' => 3,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => true,
                    ],
                ],
                'Regulatory' => [
                    [
                        'key' => 'ce_marking',
                        'name' => 'CE Marking',
                        'type' => 'text',
                        'category' => 'Regulatory',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'fda_approval',
                        'name' => 'FDA Status',
                        'type' => 'text',
                        'category' => 'Regulatory',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'iso_certification',
                        'name' => 'ISO Certification',
                        'type' => 'text',
                        'category' => 'Regulatory',
                        'sort_order' => 3,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Technical' => [
                    [
                        'key' => 'test_method',
                        'name' => 'Test Method',
                        'type' => 'text',
                        'category' => 'Technical',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'reading_method',
                        'name' => 'Reading Method',
                        'type' => 'text',
                        'category' => 'Technical',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Foot Test Kits' => [
                'Performance' => [
                    [
                        'key' => 'tests_per_kit',
                        'name' => 'Tests per Kit',
                        'type' => 'number',
                        'unit' => 'tests',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => true,
                    ],
                    [
                        'key' => 'detection_time',
                        'name' => 'Detection Time',
                        'type' => 'number',
                        'unit' => 'minutes',
                        'category' => 'Performance',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => true,
                    ],
                    [
                        'key' => 'sensitivity',
                        'name' => 'Sensitivity',
                        'type' => 'decimal',
                        'unit' => '%',
                        'category' => 'Performance',
                        'sort_order' => 3,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => true,
                    ],
                    [
                        'key' => 'specificity',
                        'name' => 'Specificity',
                        'type' => 'decimal',
                        'unit' => '%',
                        'category' => 'Performance',
                        'sort_order' => 4,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => true,
                    ],
                    [
                        'key' => 'target_pathogen',
                        'name' => 'Target Pathogen',
                        'type' => 'select',
                        'options' => ['ALP (Alkaline Phosphatase)', 'ATP (Adenosine Triphosphate)', 'Protein', 'Bacteria', 'Fungi', 'Multi-target'],
                        'category' => 'Performance',
                        'sort_order' => 5,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => true,
                    ],
                ],
                'Physical' => [
                    [
                        'key' => 'sample_type',
                        'name' => 'Sample Type',
                        'type' => 'select',
                        'options' => ['Swab', 'Direct Contact', 'Surface Sample', 'Liquid Sample'],
                        'category' => 'Physical',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => true,
                    ],
                    [
                        'key' => 'sample_area',
                        'name' => 'Sample Area',
                        'type' => 'text',
                        'unit' => 'cmÂ²',
                        'category' => 'Physical',
                        'sort_order' => 2,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'storage_temperature',
                        'name' => 'Storage Temperature',
                        'type' => 'text',
                        'unit' => 'Â°C',
                        'category' => 'Physical',
                        'sort_order' => 3,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => true,
                    ],
                    [
                        'key' => 'shelf_life',
                        'name' => 'Shelf Life',
                        'type' => 'number',
                        'unit' => 'months',
                        'category' => 'Physical',
                        'sort_order' => 4,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => true,
                    ],
                    [
                        'key' => 'application_surface',
                        'name' => 'Application Surface',
                        'type' => 'select',
                        'options' => ['Food Contact Surfaces', 'Equipment', 'Footwear', 'Floors', 'Hands/Gloves', 'All Surfaces'],
                        'category' => 'Physical',
                        'sort_order' => 5,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Regulatory' => [
                    [
                        'key' => 'ce_marking',
                        'name' => 'CE Marking',
                        'type' => 'select',
                        'options' => ['Yes', 'No', 'Pending'],
                        'category' => 'Regulatory',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'fda_approval',
                        'name' => 'FDA Status',
                        'type' => 'select',
                        'options' => ['Approved', 'EUL', 'Pending', 'Not Required'],
                        'category' => 'Regulatory',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'iso_certification',
                        'name' => 'ISO Certification',
                        'type' => 'text',
                        'category' => 'Regulatory',
                        'sort_order' => 3,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'haccp_compliance',
                        'name' => 'HACCP Compliance',
                        'type' => 'select',
                        'options' => ['Yes', 'No', 'Partial'],
                        'category' => 'Regulatory',
                        'sort_order' => 4,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Technical' => [
                    [
                        'key' => 'test_method',
                        'name' => 'Test Method',
                        'type' => 'select',
                        'options' => ['Enzymatic', 'Immunochromatographic', 'Colorimetric', 'Fluorescent', 'Luminescent'],
                        'category' => 'Technical',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'reading_method',
                        'name' => 'Reading Method',
                        'type' => 'select',
                        'options' => ['Visual', 'Digital Reader', 'Fluorometer', 'Luminometer', 'Colorimeter'],
                        'category' => 'Technical',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'detection_limit',
                        'name' => 'Detection Limit',
                        'type' => 'text',
                        'unit' => 'CFU/ml',
                        'category' => 'Technical',
                        'sort_order' => 3,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'validation_studies',
                        'name' => 'Validation Studies',
                        'type' => 'textarea',
                        'category' => 'Technical',
                        'sort_order' => 4,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Food Test Kits' => [
                'Performance' => [
                    [
                        'key' => 'tests_per_kit',
                        'name' => 'Tests per Kit',
                        'type' => 'number',
                        'unit' => 'tests',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'detection_time',
                        'name' => 'Detection Time',
                        'type' => 'number',
                        'unit' => 'minutes',
                        'category' => 'Performance',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'sensitivity',
                        'name' => 'Sensitivity',
                        'type' => 'decimal',
                        'unit' => '%',
                        'category' => 'Performance',
                        'sort_order' => 3,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'specificity',
                        'name' => 'Specificity',
                        'type' => 'decimal',
                        'unit' => '%',
                        'category' => 'Performance',
                        'sort_order' => 4,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'target_pathogen',
                        'name' => 'Target Pathogen/Analyte',
                        'type' => 'select',
                        'options' => ['ALP (Alkaline Phosphatase)', 'ATP (Adenosine Triphosphate)', 'Total Protein', 'E. coli', 'Salmonella', 'Listeria', 'Coliform', 'Multi-target'],
                        'category' => 'Performance',
                        'sort_order' => 5,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Physical' => [
                    [
                        'key' => 'sample_type',
                        'name' => 'Sample Type',
                        'type' => 'select',
                        'options' => ['Swab', 'Direct Contact', 'Surface Sample', 'Liquid Sample', 'Food Sample'],
                        'category' => 'Physical',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'sample_area',
                        'name' => 'Sample Area',
                        'type' => 'text',
                        'unit' => 'cmÂ²',
                        'category' => 'Physical',
                        'sort_order' => 2,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'storage_temperature',
                        'name' => 'Storage Temperature',
                        'type' => 'text',
                        'unit' => 'Â°C',
                        'category' => 'Physical',
                        'sort_order' => 3,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'shelf_life',
                        'name' => 'Shelf Life',
                        'type' => 'number',
                        'unit' => 'months',
                        'category' => 'Physical',
                        'sort_order' => 4,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'application_surface',
                        'name' => 'Application Surface',
                        'type' => 'select',
                        'options' => ['Food Contact Surfaces', 'Processing Equipment', 'Utensils', 'Cutting Boards', 'Hands/Gloves', 'All Food Surfaces'],
                        'category' => 'Physical',
                        'sort_order' => 5,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Regulatory' => [
                    [
                        'key' => 'ce_marking',
                        'name' => 'CE Marking',
                        'type' => 'select',
                        'options' => ['Yes', 'No', 'Pending'],
                        'category' => 'Regulatory',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'fda_approval',
                        'name' => 'FDA Status',
                        'type' => 'select',
                        'options' => ['Approved', 'GRAS', 'Pending', 'Not Required'],
                        'category' => 'Regulatory',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'iso_certification',
                        'name' => 'ISO Certification',
                        'type' => 'text',
                        'category' => 'Regulatory',
                        'sort_order' => 3,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'haccp_compliance',
                        'name' => 'HACCP Compliance',
                        'type' => 'select',
                        'options' => ['Yes', 'No', 'Partial'],
                        'category' => 'Regulatory',
                        'sort_order' => 4,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'food_safety_standards',
                        'name' => 'Food Safety Standards',
                        'type' => 'select',
                        'options' => ['USDA FSIS', 'FDA', 'BRC', 'SQF', 'IFS', 'FSSC 22000'],
                        'category' => 'Regulatory',
                        'sort_order' => 5,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Technical' => [
                    [
                        'key' => 'test_method',
                        'name' => 'Test Method',
                        'type' => 'select',
                        'options' => ['Enzymatic', 'Immunochromatographic', 'Colorimetric', 'Fluorescent', 'Luminescent', 'ATP Bioluminescence'],
                        'category' => 'Technical',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'reading_method',
                        'name' => 'Reading Method',
                        'type' => 'select',
                        'options' => ['Visual', 'Digital Reader', 'Fluorometer', 'Luminometer', 'Colorimeter', 'ATP Meter'],
                        'category' => 'Technical',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'detection_limit',
                        'name' => 'Detection Limit',
                        'type' => 'text',
                        'unit' => 'CFU/ml or RLU',
                        'category' => 'Technical',
                        'sort_order' => 3,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'validation_studies',
                        'name' => 'Validation Studies',
                        'type' => 'textarea',
                        'category' => 'Technical',
                        'sort_order' => 4,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'Rapid Tests' => [
                'Performance' => [
                    [
                        'key' => 'tests_per_kit',
                        'name' => 'Tests per Kit',
                        'type' => 'number',
                        'unit' => 'tests',
                        'category' => 'Performance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'detection_time',
                        'name' => 'Detection Time',
                        'type' => 'number',
                        'unit' => 'minutes',
                        'category' => 'Performance',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'sensitivity',
                        'name' => 'Sensitivity',
                        'type' => 'decimal',
                        'unit' => '%',
                        'category' => 'Performance',
                        'sort_order' => 3,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'specificity',
                        'name' => 'Specificity',
                        'type' => 'decimal',
                        'unit' => '%',
                        'category' => 'Performance',
                        'sort_order' => 4,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'target_pathogen',
                        'name' => 'Target Pathogen/Analyte',
                        'type' => 'select',
                        'options' => ['Bacteria', 'Virus', 'Fungi', 'Parasite', 'Toxin'],
                        'category' => 'Performance',
                        'sort_order' => 5,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Physical' => [
                    [
                        'key' => 'sample_type',
                        'name' => 'Sample Type',
                        'type' => 'select',
                        'options' => ['Blood', 'Urine', 'Saliva', 'Swab', 'Tissue'],
                        'category' => 'Physical',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'sample_area',
                        'name' => 'Sample Area',
                        'type' => 'decimal',
                        'unit' => 'cmÂ²',
                        'category' => 'Physical',
                        'sort_order' => 2,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'storage_temperature',
                        'name' => 'Storage Temperature',
                        'type' => 'text',
                        'unit' => 'Â°C',
                        'category' => 'Physical',
                        'sort_order' => 3,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'shelf_life',
                        'name' => 'Shelf Life',
                        'type' => 'number',
                        'unit' => 'months',
                        'category' => 'Physical',
                        'sort_order' => 4,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'application_surface',
                        'name' => 'Application Surface',
                        'type' => 'select',
                        'options' => ['Skin', 'Mucosa', 'Surface'],
                        'category' => 'Physical',
                        'sort_order' => 5,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Regulatory' => [
                    [
                        'key' => 'ce_marking',
                        'name' => 'CE Marking',
                        'type' => 'select',
                        'options' => ['Yes', 'No', 'Pending'],
                        'category' => 'Regulatory',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'fda_status',
                        'name' => 'FDA Status',
                        'type' => 'select',
                        'options' => ['Approved', 'Cleared', 'Pending', 'Not Required'],
                        'category' => 'Regulatory',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'iso_certification',
                        'name' => 'ISO Certification',
                        'type' => 'text',
                        'category' => 'Regulatory',
                        'sort_order' => 3,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'haccp_compliance',
                        'name' => 'HACCP Compliance',
                        'type' => 'select',
                        'options' => ['Yes', 'No', 'In Progress'],
                        'category' => 'Regulatory',
                        'sort_order' => 4,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'food_safety_standards',
                        'name' => 'Food Safety Standards',
                        'type' => 'select',
                        'options' => ['ISO 22000', 'FSSC 22000', 'BRC', 'IFS', 'Not Applicable'],
                        'category' => 'Regulatory',
                        'sort_order' => 5,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Technical' => [
                    [
                        'key' => 'test_method',
                        'name' => 'Test Method',
                        'type' => 'select',
                        'options' => ['Lateral Flow', 'ELISA', 'PCR', 'Culture'],
                        'category' => 'Technical',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'reading_method',
                        'name' => 'Reading Method',
                        'type' => 'select',
                        'options' => ['Visual', 'Reader Required', 'Automated'],
                        'category' => 'Technical',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'detection_limit',
                        'name' => 'Detection Limit',
                        'type' => 'text',
                        'unit' => 'CFU/ml or RLU',
                        'category' => 'Technical',
                        'sort_order' => 3,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'validation_studies',
                        'name' => 'Validation Studies',
                        'type' => 'textarea',
                        'category' => 'Technical',
                        'sort_order' => 4,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
            'UPLC System Maintenance Kits' => [
                'System Specifications' => [
                    [
                        'key' => 'type',
                        'name' => 'Type',
                        'type' => 'select',
                        'options' => ['Plates and Racks', 'Columns', 'Tubing', 'Valves', 'Pumps', 'Detectors', 'Consumables'],
                        'category' => 'System Specifications',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'system_type',
                        'name' => 'System Type',
                        'type' => 'select',
                        'options' => ['HPLC', 'UPLC', 'LC-MS', 'UHPLC', 'LC-MS/MS'],
                        'category' => 'System Specifications',
                        'sort_order' => 2,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'instrument',
                        'name' => 'Instrument',
                        'type' => 'text',
                        'category' => 'System Specifications',
                        'sort_order' => 3,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'component',
                        'name' => 'Component',
                        'type' => 'text',
                        'category' => 'System Specifications',
                        'sort_order' => 4,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Maintenance' => [
                    [
                        'key' => 'replacement_schedule',
                        'name' => 'Replacement Schedule',
                        'type' => 'select',
                        'options' => ['Daily', 'Weekly', 'Monthly', 'Quarterly', 'Semi-Annual', 'Annual', 'As Needed', 'Based on Usage'],
                        'category' => 'Maintenance',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
                'Product Information' => [
                    [
                        'key' => 'brand',
                        'name' => 'Brand',
                        'type' => 'text',
                        'category' => 'Product Information',
                        'sort_order' => 1,
                        'is_filterable' => true,
                        'show_on_listing' => true,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'unspsc',
                        'name' => 'UNSPSC',
                        'type' => 'text',
                        'category' => 'Product Information',
                        'sort_order' => 2,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                    [
                        'key' => 'units_per_package',
                        'name' => 'Units per Package',
                        'type' => 'text',
                        'category' => 'Product Information',
                        'sort_order' => 3,
                        'is_filterable' => false,
                        'show_on_listing' => false,
                        'show_on_detail' => true,
                        'required' => false,
                    ],
                ],
            ],
        ];

        // Return templates for the specific category, or empty array if not found
        $result = $templates[$category->name] ?? [];
        \Log::info("Found " . count($result) . " template groups for category: {$category->name}");
        
        return $result;
    }

    /**
     * Get specifications grouped by category for a product
     *
     * @param int $productId
     * @return \Illuminate\Support\Collection
     */
    public function getSpecificationsByCategory(int $productId)
    {
        return ProductSpecification::where('product_id', $productId)
            ->orderBy('category', 'asc')
            ->orderBy('sort_order', 'asc')
            ->get()
            ->groupBy('category');
    }

    /**
     * Delete all specifications for a product
     *
     * @param int $productId
     * @return bool
     */
    public function deleteProductSpecifications(int $productId): bool
    {
        return ProductSpecification::where('product_id', $productId)->delete();
    }

    /**
     * Update a single specification
     *
     * @param int $specificationId
     * @param array $data
     * @return bool
     */
    public function updateSpecification(int $specificationId, array $data): bool
    {
        $specification = ProductSpecification::find($specificationId);
        
        if (!$specification) {
            return false;
        }

        return $specification->update($data);
    }

    /**
     * Create a single specification
     *
     * @param array $data
     * @return ProductSpecification
     */
    public function createSpecification(array $data): ProductSpecification
    {
        return ProductSpecification::create($data);
    }
} 